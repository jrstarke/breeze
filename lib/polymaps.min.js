if(!org)var org={};if(!org.polymaps)org.polymaps={};(function(e){function n(t){var n=t.indexOf(":");return n<0?t:{space:e.ns[t.substring(0,n)],local:t.substring(n+1)}}function r(e){for(var t=0;t<r.maps.length;t++){r.maps[t].resize()}}function i(e){return 360/Math.PI*Math.atan(Math.exp(e*Math.PI/180))-90}function s(e){return 180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360))}function u(e,t){if(e.row>t.row){var n=e;e=t;t=n}return{x0:e.column,y0:e.row,x1:t.column,y1:t.row,dx:t.column-e.column,dy:t.row-e.row}}function a(e,t,n,r,i){var s=Math.max(n,Math.floor(t.y0)),o=Math.min(r,Math.ceil(t.y1));if(e.x0==t.x0&&e.y0==t.y0?e.x0+t.dy/e.dy*e.dx<t.x1:e.x1-t.dy/e.dy*e.dx<t.x0){var u=e;e=t;t=u}var a=e.dx/e.dy,f=t.dx/t.dy,l=e.dx>0,c=t.dx<0;for(var h=s;h<o;h++){var p=a*Math.max(0,Math.min(e.dy,h+l-e.y0))+e.x0,d=f*Math.max(0,Math.min(t.dy,h+c-t.y0))+t.x0;i(Math.floor(d),Math.ceil(p),h)}}function f(e,t,n,r,i,s){var o=u(e,t),f=u(t,n),l=u(n,e);if(o.dy>f.dy){var c=o;o=f;f=c}if(o.dy>l.dy){var c=o;o=l;l=c}if(f.dy>l.dy){var c=f;f=l;l=c}if(o.dy)a(l,o,r,i,s);if(f.dy)a(l,f,r,i,s)}e.version="2.5.1";var t={x:0,y:0};e.ns={svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"};e.id=function(){var e=0;return function(){return++e}}();e.svg=function(t){return document.createElementNS(e.ns.svg,t)};e.transform=function(e,t,n,r,i,s){var o={},u,a,f;if(!arguments.length){e=1;n=0;i=0;t=0;r=1;s=0}o.zoomFraction=function(i){if(!arguments.length)return a;a=i;u=Math.floor(a+Math.log(Math.sqrt(e*e+t*t+n*n+r*r))/Math.LN2);f=Math.pow(2,-u);return o};o.apply=function(o){var a=Math.pow(2,-o.zoom),f=Math.pow(2,o.zoom-u);return{column:(e*o.column*a+n*o.row*a+i)*f,row:(t*o.column*a+r*o.row*a+s)*f,zoom:o.zoom-u}};o.unapply=function(o){var a=Math.pow(2,-o.zoom),f=Math.pow(2,o.zoom+u);return{column:(o.column*a*r-o.row*a*n-i*r+s*n)/(e*r-t*n)*f,row:(o.column*a*t-o.row*a*e-i*t+s*e)/(n*t-r*e)*f,zoom:o.zoom+u}};o.toString=function(){return"matrix("+[e*f,t*f,n*f,r*f].join(" ")+" 0 0)"};return o.zoomFraction(0)};e.cache=function(e,t){function f(e){a--;if(t)t(e);delete i[e.key];if(e.next)e.next.prev=e.prev;else if(o=e.prev)o.next=null;if(e.prev)e.prev.next=e.next;else if(s=e.next)s.prev=null}function l(){for(var e=o;a>u;e=e.prev){if(!e)break;if(e.lock)continue;f(e)}}var n={},r={},i={},s=null,o=null,u=64,a=0;n.peek=function(e){return i[[e.zoom,e.column,e.row].join("/")]};n.load=function(t,n){var u=[t.zoom,t.column,t.row].join("/"),f=i[u];if(f){if(f.prev){f.prev.next=f.next;if(f.next)f.next.prev=f.prev;else o=f.prev;f.prev=null;f.next=s;s.prev=f;s=f}f.lock=1;r[u]=f;return f}f={key:u,column:t.column,row:t.row,zoom:t.zoom,next:s,prev:null,lock:1};e.call(null,f,n);r[u]=i[u]=f;if(s)s.prev=f;else o=f;s=f;a++;return f};n.unload=function(e){if(!(e in r))return false;var t=r[e];t.lock=0;delete r[e];if(t.request&&t.request.abort(false))f(t);return t};n.locks=function(){return r};n.size=function(e){if(!arguments.length)return u;u=e;l();return n};n.flush=function(){l();return n};n.clear=function(){for(var e in i){var u=i[e];if(u.request)u.request.abort(false);if(t)t(i[e]);if(u.lock){u.lock=0;u.element.parentNode.removeChild(u.element)}}r={};i={};s=o=null;a=0;return n};return n};e.url=function(t){function i(i){var s=i.zoom<0?1:1<<i.zoom,o=i.column;if(r){o=i.column%s;if(o<0)o+=s}else if(o<0||o>=s){return null}return t.replace(/{(.)}/g,function(t,r){switch(r){case"S":return n[(Math.abs(i.zoom)+i.row+o)%n.length];case"Z":return i.zoom;case"X":return o;case"Y":return i.row;case"B":{var s=e.map.coordinateLocation({row:i.row,column:o,zoom:i.zoom}),u=e.map.coordinateLocation({row:i.row+1,column:o+1,zoom:i.zoom}),a=Math.ceil(Math.log(i.zoom)/Math.LN2);return u.lat.toFixed(a)+","+s.lon.toFixed(a)+","+s.lat.toFixed(a)+","+u.lon.toFixed(a)}}return r})}var n=[],r=true;i.template=function(e){if(!arguments.length)return t;t=e;return i};i.hosts=function(e){if(!arguments.length)return n;n=e;return i};i.repeat=function(e){if(!arguments.length)return r;r=e;return i};return i};e.dispatch=function(e){var t={};e.on=function(n,r){var i=t[n]||(t[n]=[]);for(var s=0;s<i.length;s++){if(i[s].handler==r)return e}i.push({handler:r,on:true});return e};e.off=function(n,r){var i=t[n];if(i)for(var s=0;s<i.length;s++){var o=i[s];if(o.handler==r){o.on=false;i.splice(s,1);break}}return e};return function(n){var r=t[n.type];if(!r)return;r=r.slice();for(var i=0;i<r.length;i++){var s=r[i];if(s.on)s.handler.call(e,n)}}};e.queue=function(){function i(){if(n>=r||!t.length)return;n++;t.pop()()}function s(e){for(var n=0;n<t.length;n++){if(t[n]==e){t.splice(n,1);return true}}return false}function o(e,r,o){function a(){u=new XMLHttpRequest;if(o&&u.overrideMimeType){u.overrideMimeType(o)}u.open("GET",e,true);u.onreadystatechange=function(e){if(u.readyState==4){n--;if(u.status<300)r(u);i()}};u.send(null)}function f(e){if(s(a))return true;if(e&&u){u.abort();return true}return false}var u;t.push(a);i();return{abort:f}}function u(e,t,n){return o(e,function(e){if(e.responseText)t(e.responseText)},n)}function a(e,t){return o(e,function(e){if(e.responseText)t(JSON.parse(e.responseText))},"application/json")}function f(e,t){return o(e,function(e){if(e.responseXML)t(e.responseXML)},"application/xml")}function l(r,o,u){function f(){a=document.createElement("img");a.onerror=function(){n--;i()};a.onload=function(){n--;u(a);i()};a.src=o;r.setAttributeNS(e.ns.xlink,"href",o)}function l(e){if(s(f))return true;if(e&&a){a.src="about:";return true}return false}var a;t.push(f);i();return{abort:l}}var t=[],n=0,r=6;return{text:u,xml:f,json:a,image:l}}();e.map=function(){function C(){if(m){if(p<m[0])p=m[0];else if(p>m[1])p=m[1]}d=p-(p=Math.round(p));v=Math.pow(2,d)}function k(){if(!N)return;var e=45/Math.pow(2,p+d-3);var t=Math.max(Math.abs(w*l.x+y*l.y),Math.abs(S*l.x+E*l.y)),n=i(x-t*e/c.y),r=i(T+t*e/c.y);h.lat=Math.max(n,Math.min(r,h.lat));var s=Math.max(Math.abs(w*l.y+y*l.x),Math.abs(S*l.y+E*l.x)),o=N[0].lon-s*e/c.x,u=N[1].lon+s*e/c.x;h.lon=Math.max(o,Math.min(u,h.lon))}var n={},u,a,f=t,l=t,c={x:256,y:256},h={lat:37.76487,lon:-122.41948},p=12,d=0,v=1,m=[1,18],g=0,y=1,w=0,E=1,S=0,x=-180,T=180;var N=[{lat:i(x),lon:-Infinity},{lat:i(T),lon:Infinity}];n.locationCoordinate=function(t){var n=e.map.locationCoordinate(t),r=Math.pow(2,p);n.column*=r;n.row*=r;n.zoom+=p;return n};n.coordinateLocation=e.map.coordinateLocation;n.coordinatePoint=function(e,t){var n=Math.pow(2,p-t.zoom),r=Math.pow(2,p-e.zoom),i=(t.column*n-e.column*r)*c.x*v,s=(t.row*n-e.row*r)*c.y*v;return{x:l.x+y*i-w*s,y:l.y+w*i+y*s}};n.pointCoordinate=function(e,t){var n=Math.pow(2,p-e.zoom),r=(t.x-l.x)/v,i=(t.y-l.y)/v;return{column:e.column*n+(E*r-S*i)/c.x,row:e.row*n+(S*r+E*i)/c.y,zoom:p}};n.locationPoint=function(e){var t=Math.pow(2,p+d-3)/45,n=(e.lon-h.lon)*t*c.x,r=(s(h.lat)-s(e.lat))*t*c.y;return{x:l.x+y*n-w*r,y:l.y+w*n+y*r}};n.pointLocation=function(e){var t=45/Math.pow(2,p+d-3),n=(e.x-l.x)*t,r=(e.y-l.y)*t;return{lon:h.lon+(E*n-S*r)/c.x,lat:i(s(h.lat)-(S*n+E*r)/c.y)}};var L=e.svg("rect");L.setAttribute("visibility","hidden");L.setAttribute("pointer-events","all");n.container=function(e){if(!arguments.length)return u;u=e;u.setAttribute("class","map");u.appendChild(L);return n.resize()};n.focusableParent=function(){for(var e=u;e;e=e.parentNode){if(e.tabIndex>=0)return e}return window};n.mouse=function(t){var n=(u.ownerSVGElement||u).createSVGPoint();if(o<0&&(window.scrollX||window.scrollY)){var r=document.body.appendChild(e.svg("svg"));r.style.position="absolute";r.style.top=r.style.left="0px";var i=r.getScreenCTM();o=!(i.f||i.e);document.body.removeChild(r)}if(o){n.x=t.pageX;n.y=t.pageY}else{n.x=t.clientX;n.y=t.clientY}return n.matrixTransform(u.getScreenCTM().inverse())};n.size=function(e){if(!arguments.length)return f;a=e;return n.resize()};n.resize=function(){if(!a){L.setAttribute("width","100%");L.setAttribute("height","100%");b=L.getBBox();f={x:b.width,y:b.height};r.add(n)}else{f=a;r.remove(n)}L.setAttribute("width",f.x);L.setAttribute("height",f.y);l={x:f.x/2,y:f.y/2};k();n.dispatch({type:"resize"});return n};n.tileSize=function(e){if(!arguments.length)return c;c=e;n.dispatch({type:"move"});return n};n.center=function(e){if(!arguments.length)return h;h=e;k();n.dispatch({type:"move"});return n};n.panBy=function(e){var t=45/Math.pow(2,p+d-3),r=e.x*t,o=e.y*t;return n.center({lon:h.lon+(S*o-E*r)/c.x,lat:i(s(h.lat)+(S*r+E*o)/c.y)})};n.centerRange=function(e){if(!arguments.length)return N;N=e;if(N){x=N[0].lat>-90?s(N[0].lat):-Infinity;T=N[0].lat<90?s(N[1].lat):Infinity}else{x=-Infinity;T=Infinity}k();n.dispatch({type:"move"});return n};n.zoom=function(e){if(!arguments.length)return p+d;p=e;C();return n.center(h)};n.zoomBy=function(e,t,r){if(arguments.length<2)return n.zoom(p+d+e);if(arguments.length<3)r=n.pointLocation(t);p=p+d+e;C();var i=n.locationPoint(r);return n.panBy({x:t.x-i.x,y:t.y-i.y})};n.zoomRange=function(e){if(!arguments.length)return m;m=e;return n.zoom(p+d)};n.extent=function(e){if(!arguments.length)return[n.pointLocation({x:0,y:f.y}),n.pointLocation({x:f.x,y:0})];var t=n.locationPoint(e[0]),r=n.locationPoint(e[1]),i=Math.max((r.x-t.x)/f.x,(t.y-r.y)/f.y),s=n.pointLocation({x:(t.x+r.x)/2,y:(t.y+r.y)/2});p=p+d-Math.log(i)/Math.LN2;C();return n.center(s)};n.angle=function(e){if(!arguments.length)return g;g=e;y=Math.cos(g);w=Math.sin(g);E=Math.cos(-g);S=Math.sin(-g);k();n.dispatch({type:"move"});return n};n.add=function(e){e.map(n);return n};n.remove=function(e){e.map(null);return n};n.dispatch=e.dispatch(n);return n};r.maps=[];r.add=function(e){for(var t=0;t<r.maps.length;t++){if(r.maps[t]==e)return}r.maps.push(e)};r.remove=function(e){for(var t=0;t<r.maps.length;t++){if(r.maps[t]==e){r.maps.splice(t,1);return}}};if(window.addEventListener){window.addEventListener("resize",r,false);window.addEventListener("load",r,false)}e.map.locationCoordinate=function(e){var t=1/360;return{column:(e.lon+180)*t,row:(180-s(e.lat))*t,zoom:0}};e.map.coordinateLocation=function(e){var t=45/Math.pow(2,e.zoom-3);return{lon:t*e.column-180,lat:i(180-t*e.row)}};var o=/WebKit/.test(navigator.userAgent)?-1:0;e.layer=function(n,r){function g(e){var t=v[0].nextSibling;for(;d<e;d++){h.insertBefore(v[-4],t);h.insertBefore(v[2],t);h.insertBefore(v[1],t);var n=v[-4];for(var r=-4;r<2;)v[r]=v[++r];v[r]=n}}function y(e){var t=v[0].nextSibling;for(;d>e;d--){h.insertBefore(v[-1],t);h.insertBefore(v[2],v[-4]);var n=v[2];for(var r=2;r>-4;)v[r]=v[--r];v[r]=n}}function b(){function A(t){var n=t.zoom,r=n<0?1:1<<n,i=t.column%r,s=t.row;if(i<0)i+=r;return{locationPoint:function(t){var r=e.map.locationCoordinate(t),o=Math.pow(2,n-r.zoom);return{x:b.x*(o*r.column-i),y:b.y*(o*r.row-s)}}}}function B(e,t,n){var r=x.zoom,i=2-k,o=4+k;for(var u=e;u<t;u++){var a=s.load({column:u,row:n,zoom:r},A);if(!a.ready&&!(a.key in M)){a.proxyRefs={};var f,l,c;for(var h=1;h<=i;h++){l=true;for(var p=0,d=1<<h;p<=d;p++){for(var v=0;v<=d;v++){c=s.peek(f={column:(u<<h)+v,row:(n<<h)+p,zoom:r+h});if(c&&c.ready){M[c.key]=s.load(f);c.proxyCount++;a.proxyRefs[c.key]=c}else{l=false}}}if(l)break}if(!l){for(var h=1;h<=o;h++){c=s.peek(f={column:u>>h,row:n>>h,zoom:r-h});if(c&&c.ready){M[c.key]=s.load(f);c.proxyCount++;a.proxyRefs[c.key]=c;break}}}}M[a.key]=a}}var n=i.map(),r=n.zoom(),l=r-(r=Math.round(r)),c=n.size(),m=n.angle(),b=n.tileSize(),w=n.locationCoordinate(n.center());if(d!=r){if(d<r)g(r);else if(d>r)y(r);else d=r;for(var E=-4;E<=2;E++){var S=v[E];S.setAttribute("class","zoom"+(E<0?"":"+")+E+" zoom"+(r+E));S.setAttribute("transform","scale("+Math.pow(2,-E)+")")}}h.setAttribute("transform","translate("+c.x/2+","+c.y/2+")"+(m?"rotate("+m/Math.PI*180+")":"")+(l?"scale("+Math.pow(2,l)+")":"")+(p?p.zoomFraction(l):""));var x=n.pointCoordinate(w,t),T=n.pointCoordinate(w,{x:c.x,y:0}),N=n.pointCoordinate(w,c),C=n.pointCoordinate(w,{x:0,y:c.y});if(!l&&!m&&!p){w.column=(Math.round(b.x*w.column)+(c.x&1)/2)/b.x;w.row=(Math.round(b.y*w.row)+(c.y&1)/2)/b.y}if(p){x=p.unapply(x);T=p.unapply(T);N=p.unapply(N);C=p.unapply(C);w=p.unapply(w)}var k=a?a(x.zoom)-x.zoom:0;if(k){var L=Math.pow(2,k);x.column*=L;x.row*=L;T.column*=L;T.row*=L;N.column*=L;N.row*=L;C.column*=L;C.row*=L;x.zoom=T.zoom=N.zoom=C.zoom+=k}var O=s.locks(),M={};for(var _ in O){O[_].proxyCount=0}if(u&&k>-5&&k<3){var D=x.zoom<0?1:1<<x.zoom;if(o){f(x,T,N,0,D,B);f(N,C,x,0,D,B)}else{var P=Math.floor((x.column+N.column)/2),H=Math.max(0,Math.min(D-1,Math.floor((T.row+C.row)/2))),E=Math.min(4,x.zoom);P=P>>E<<E;H=H>>E<<E;B(P,P+1,H)}}for(var _ in M){var j=M[_],L=Math.pow(2,j.level=j.zoom-w.zoom);j.element.setAttribute("transform","translate("+(j.x=b.x*(j.column-w.column*L))+","+(j.y=b.y*(j.row-w.row*L))+")")}for(var _ in O){if(!(_ in M)){var j=s.unload(_);j.element.parentNode.removeChild(j.element);delete j.proxyRefs}}for(var _ in M){var j=M[_];if(j.element.parentNode!=v[j.level]){v[j.level].appendChild(j.element);if(i.show)i.show(j)}}s.flush();i.dispatch({type:"move"})}function w(e){if(e.tile.proxyRefs){for(var t in e.tile.proxyRefs){var n=e.tile.proxyRefs[t];if(--n.proxyCount<=0&&s.unload(t)){n.element.parentNode.removeChild(n.element)}}delete e.tile.proxyRefs}}var i={},s=i.cache=e.cache(n,r).size(512),o=true,u=true,a,l,c,h=e.svg("g"),p,d,v={};h.setAttribute("class","layer");for(var m=-4;m<=-1;m++)v[m]=h.appendChild(e.svg("g"));for(var m=2;m>=1;m--)v[m]=h.appendChild(e.svg("g"));v[0]=h.appendChild(e.svg("g"));i.map=function(e){if(!arguments.length)return c;if(c){if(c==e){h.parentNode.appendChild(h);return i}c.off("move",b).off("resize",b);h.parentNode.removeChild(h)}c=e;if(c){c.container().appendChild(h);if(i.init)i.init(h);c.on("move",b).on("resize",b);b()}return i};i.container=function(){return h};i.levels=function(){return v};i.id=function(e){if(!arguments.length)return l;l=e;h.setAttribute("id",e);return i};i.visible=function(e){if(!arguments.length)return u;if(u=e)h.removeAttribute("visibility");else h.setAttribute("visibility","hidden");if(c)b();return i};i.transform=function(e){if(!arguments.length)return p;p=e;if(c)b();return i};i.zoom=function(e){if(!arguments.length)return a;a=typeof e=="function"||e==null?e:function(){return e};if(c)b();return i};i.tile=function(e){if(!arguments.length)return o;o=e;if(c)b();return i};i.reload=function(){s.clear();if(c)b();return i};i.dispatch=e.dispatch(i);i.on("load",w);return i};e.image=function(){function r(r){var i=r.element=e.svg("image"),s=t.map().tileSize();i.setAttribute("preserveAspectRatio","none");i.setAttribute("width",s.x);i.setAttribute("height",s.y);if(typeof n=="function"){i.setAttribute("opacity",0);var o=n(r);if(o!=null){r.request=e.queue.image(i,o,function(e){delete r.request;r.ready=true;r.img=e;i.removeAttribute("opacity");t.dispatch({type:"load",tile:r})})}else{r.ready=true;t.dispatch({type:"load",tile:r})}}else{r.ready=true;if(n!=null)i.setAttributeNS(e.ns.xlink,"href",n);t.dispatch({type:"load",tile:r})}}function i(e){if(e.request)e.request.abort(true)}var t=e.layer(r,i),n;t.url=function(r){if(!arguments.length)return n;n=typeof r=="string"&&/{.}/.test(r)?e.url(r):r;return t.reload()};return t};e.geoJson=function(t){function d(e){var t={lat:0,lon:0};return function(n){t.lat=n[1];t.lon=n[0];var r=e(t);n.x=r.x;n.y=r.y;return r}}function v(e,t){return e&&e.type in m&&m[e.type](e,t)}function g(e,t,n){return e.type in y&&y[e.type](e,t,n)}function b(r,s){function u(e){var i=[];if(e.next)r.request=t(e.next.href,u);switch(e.type){case"FeatureCollection":{for(var a=0;a<e.features.length;a++){var f=e.features[a],l=v(f.geometry,s);if(l)i.push({element:o.appendChild(l),data:f})}break};case"Feature":{var l=v(e.geometry,s);if(l)i.push({element:o.appendChild(l),data:e});break};default:{var l=v(e,s);if(l)i.push({element:o.appendChild(l),data:{type:"Feature",geometry:e}});break}}r.ready=true;i.push.apply(r.features,i);n.dispatch({type:"load",tile:r,features:i})}var o=r.element=e.svg("g");r.features=[];s=d(s(r).locationPoint);if(i!=null){r.request=t(typeof i=="function"?i(r):i,u)}else{u({type:"FeatureCollection",features:h||[]})}}function w(e){if(e.request)e.request.abort(true)}function E(){var e=n.map().zoom(),t=n.cache.locks(),r,i,s,o,u,a,f;if(l=="fixed"){for(r in t){if((i=t[r]).scale!=e){f="scale("+Math.pow(2,i.zoom-e)+")";o=-1;u=(s=i.features).length;while(++o<u)g((a=s[o]).data.geometry,a.element,f);i.scale=e}}}else{for(r in t){o=-1;u=(s=(i=t[r]).features).length;while(++o<u)g((a=s[o]).data.geometry,a.element,"");delete i.scale}}}var n=e.layer(b,w),r=n.container(),i,s=true,o="org.polymaps."+e.id(),u="url(#"+o+")",a=r.insertBefore(e.svg("clipPath"),r.firstChild),f=a.appendChild(e.svg("rect")),l="auto",c=null,h;r.setAttribute("fill-rule","evenodd");a.setAttribute("id",o);if(!arguments.length)t=e.queue.json;var m={Point:function(t,n){var r=n(t.coordinates),i=e.svg("circle");i.setAttribute("r",4.5);i.setAttribute("transform","translate("+r.x+","+r.y+")");return i},MultiPoint:function(t,n){var r=e.svg("g"),i=t.coordinates,s,o,u=-1,a=i.length;while(++u<a){o=r.appendChild(e.svg("circle"));o.setAttribute("r",4.5);o.setAttribute("transform","translate("+(s=n(i[u])).x+","+s.y+")")}return r},LineString:function(t,n){var r=e.svg("path"),i=["M"],s=t.coordinates,o,u=-1,a=s.length;while(++u<a)i.push((o=n(s[u])).x,",",o.y,"L");i.pop();if(!i.length)return;r.setAttribute("d",i.join(""));return r},MultiLineString:function(t,n){var r=e.svg("path"),i=[],s=t.coordinates,o,u=-1,a,f=s.length,l;while(++u<f){o=s[u];a=-1;l=o.length;i.push("M");while(++a<l)i.push((p=n(o[a])).x,",",p.y,"L");i.pop()}if(!i.length)return;r.setAttribute("d",i.join(""));return r},Polygon:function(t,n){var r=e.svg("path"),i=[],s=t.coordinates,o,u=-1,a,f=s.length,l;while(++u<f){o=s[u];a=-1;l=o.length-1;i.push("M");while(++a<l)i.push((p=n(o[a])).x,",",p.y,"L");i[i.length-1]="Z"}if(!i.length)return;r.setAttribute("d",i.join(""));return r},MultiPolygon:function(t,n){var r=e.svg("path"),i=[],s=t.coordinates,o,u,a=-1,f,l,c=s.length,h,d;while(++a<c){o=s[a];f=-1;h=o.length;while(++f<h){u=o[f];l=-1;d=u.length-1;i.push("M");while(++l<d)i.push((p=n(u[l])).x,",",p.y,"L");i[i.length-1]="Z"}}if(!i.length)return;r.setAttribute("d",i.join(""));return r},GeometryCollection:function(t,n){var r=e.svg("g"),i=-1,s=t.geometries,o=s.length,u;while(++i<o){u=v(s[i],n);if(u)r.appendChild(u)}return r}};var y={Point:function(e,t,n){var r=e.coordinates;t.setAttribute("transform","translate("+r.x+","+r.y+")"+n)},MultiPoint:function(e,t,n){var r=e.coordinates,i=-1,s=u.length,o=t.firstChild,u;while(++i<s){u=r[i];o.setAttribute("transform","translate("+u.x+","+u.y+")"+n);o=o.nextSibling}}};n.url=function(t){if(!arguments.length)return i;i=typeof t=="string"&&/{.}/.test(t)?e.url(t):t;if(i!=null)h=null;if(typeof i=="string")n.tile(false);return n.reload()};n.features=function(e){if(!arguments.length)return h;if(h=e){i=null;n.tile(false)}return n.reload()};n.clip=function(e){if(!arguments.length)return s;if(s)r.removeChild(a);if(s=e)r.insertBefore(a,r.firstChild);var t=n.cache.locks();for(var i in t){if(s)t[i].element.setAttribute("clip-path",u);else t[i].element.removeAttribute("clip-path")}return n};var S=n.tile;n.tile=function(e){if(arguments.length&&!e)n.clip(e);return S.apply(n,arguments)};var x=n.map;n.map=function(e){if(e&&f){var t=e.tileSize();f.setAttribute("width",t.x);f.setAttribute("height",t.y)}return x.apply(n,arguments)};n.scale=function(e){if(!arguments.length)return l;if(l=e)n.on("move",E);else n.off("move",E);if(n.map())E();return n};n.show=function(e){if(s)e.element.setAttribute("clip-path",u);else e.element.removeAttribute("clip-path");n.dispatch({type:"show",tile:e,features:e.features});return n};n.reshow=function(){var e=n.cache.locks();for(var t in e)n.show(e[t]);return n};return n};e.dblclick=function(){function i(e){var r=n.zoom();if(e.shiftKey)r=Math.ceil(r)-r-1;else r=1-r+Math.floor(r);t==="mouse"?n.zoomBy(r,n.mouse(e)):n.zoomBy(r)}var e={},t="mouse",n,r;e.zoom=function(n){if(!arguments.length)return t;t=n;return e};e.map=function(t){if(!arguments.length)return n;if(n){r.removeEventListener("dblclick",i,false);r=null}if(n=t){r=n.container();r.addEventListener("dblclick",i,false)}return e};return e};e.drag=function(){function i(e){if(e.shiftKey)return;r={x:e.clientX,y:e.clientY};t.focusableParent().focus();e.preventDefault();document.body.style.setProperty("cursor","move",null)}function s(e){if(!r)return;t.panBy({x:e.clientX-r.x,y:e.clientY-r.y});r.x=e.clientX;r.y=e.clientY}function o(e){if(!r)return;s(e);r=null;document.body.style.removeProperty("cursor")}var e={},t,n,r;e.map=function(r){if(!arguments.length)return t;if(t){n.removeEventListener("mousedown",i,false);n=null}if(t=r){n=t.container();n.addEventListener("mousedown",i,false)}return e};window.addEventListener("mousemove",s,false);window.addEventListener("mouseup",o,false);return e};e.wheel=function(){function a(e){s=null}function c(e){var n=e.wheelDelta||-e.detail,u;if(n){if(r){try{l.scrollTop=1e3;l.dispatchEvent(e);n=1e3-l.scrollTop}catch(f){}n*=.005}else{var c=Date.now();if(c-t>200){n=n>0?+1:-1;t=c}else{n=0}}}if(n){switch(i){case"mouse":{u=o.mouse(e);if(!s)s=o.pointLocation(u);o.off("move",a).zoomBy(n,u,s).on("move",a);break};case"location":{o.zoomBy(n,o.locationPoint(s),s);break};default:{o.zoomBy(n);break}}}e.preventDefault();return false}var e={},t=0,n=0,r=true,i="mouse",s,o,u;var f=document.createElement("div"),l=document.createElement("div");l.style.visibility="hidden";l.style.top="0px";l.style.height="0px";l.style.width="0px";l.style.overflowY="scroll";f.style.height="2000px";l.appendChild(f);document.body.appendChild(l);e.smooth=function(t){if(!arguments.length)return r;r=t;return e};e.zoom=function(t,n){if(!arguments.length)return i;i=t;s=n;if(o){if(i=="mouse")o.on("move",a);else o.off("move",a)}return e};e.map=function(t){if(!arguments.length)return o;if(o){u.removeEventListener("mousemove",a,false);u.removeEventListener("mousewheel",c,false);u.removeEventListener("MozMousePixelScroll",c,false);u=null;o.off("move",a)}if(o=t){if(i=="mouse")o.on("move",a);u=o.container();u.addEventListener("mousemove",a,false);u.addEventListener("mousewheel",c,false);u.addEventListener("MozMousePixelScroll",c,false)}return e};return e};e.arrow=function(){function f(e){if(e.ctrlKey||e.altKey||e.metaKey)return;var i=Date.now(),a=0,f=0;switch(e.keyCode){case 37:{if(!t.left){n=i;t.left=1;if(!t.right)a=o}break};case 39:{if(!t.right){n=i;t.right=1;if(!t.left)a=-o}break};case 38:{if(!t.up){n=i;t.up=1;if(!t.down)f=o}break};case 40:{if(!t.down){n=i;t.down=1;if(!t.up)f=-o}break};default:return}if(a||f)u.panBy({x:a,y:f});if(!r&&t.left|t.right|t.up|t.down){r=setInterval(h,s)}e.preventDefault()}function l(e){n=Date.now();switch(e.keyCode){case 37:t.left=0;break;case 39:t.right=0;break;case 38:t.up=0;break;case 40:t.down=0;break;default:return}if(r&&!(t.left|t.right|t.up|t.down)){r=clearInterval(r)}e.preventDefault()}function c(e){switch(e.charCode){case 45:case 95:u.zoom(Math.ceil(u.zoom())-1);break;case 43:case 61:u.zoom(Math.floor(u.zoom())+1);break;default:return}e.preventDefault()}function h(){if(!u)return;if(Date.now()<n+i)return;var e=(t.left-t.right)*o,r=(t.up-t.down)*o;if(e||r)u.panBy({x:e,y:r})}var e={},t={left:0,right:0,up:0,down:0},n=0,r,i=250,s=50,o=16,u,a;e.map=function(t){if(!arguments.length)return u;if(u){a.removeEventListener("keypress",c,false);a.removeEventListener("keydown",f,false);a.removeEventListener("keyup",l,false);a=null}if(u=t){a=u.focusableParent();a.addEventListener("keypress",c,false);a.addEventListener("keydown",f,false);a.addEventListener("keyup",l,false)}return e};e.speed=function(t){if(!arguments.length)return o;o=t;return e};return e};e.hash=function(){function o(){var e=s(r);if(t!==e)location.replace(t=e)}function u(){if(location.hash===t)return;if(i(r,(t=location.hash).substring(1)))o()}var e={},t,n=90-1e-8,r;var i=function(e,t){var r=t.split("/").map(Number);if(r.length<3||r.some(isNaN))return true;else{var i=e.size();e.zoomBy(r[0]-e.zoom(),{x:i.x/2,y:i.y/2},{lat:Math.min(n,Math.max(-n,r[1])),lon:r[2]})}};var s=function(e){var t=e.center(),n=e.zoom(),r=Math.max(0,Math.ceil(Math.log(n)/Math.LN2));return"#"+n.toFixed(2)+"/"+t.lat.toFixed(r)+"/"+t.lon.toFixed(r)};e.map=function(t){if(!arguments.length)return r;if(r){r.off("move",o);window.removeEventListener("hashchange",u,false)}if(r=t){r.on("move",o);window.addEventListener("hashchange",u,false);location.hash?u():o()}return e};e.parser=function(t){if(!arguments.length)return i;i=t;return e};e.formatter=function(t){if(!arguments.length)return s;s=t;return e};return e};e.touch=function(){function l(e,t){var r=-1,i=e.length;while(++r<i){var s=e[r],o=s.identifier;switch(t){case"start":u[o]={};u[o]["start"]=u[o]["current"]=n.mouse(s);break;case"current":if(u[o])u[o]["current"]=n.mouse(s);break;case"finish":delete u[o];break}}a[t]=true;if(t==="current")h(t)}function c(){if(a.start||a.finish){i=n.zoom();angle=n.angle();s=p("start")}a={};f=null;var e=p("current"),t=e.n>1?Math.log(e.r/s.r)/Math.LN2+i-n.zoom():0;if(e.n)n.zoomBy(t,e,s.location);if(o&&"angle"in e){var r=e.angle-s.angle,u=n.center();n.center(e.location);n.angle(angle+r);n.center(u)}}function h(e){if(f)return;else f=setTimeout(c,0)}function p(e){var t=[],r;for(var i in u)if(u[i][e])t.push(u[i][e]);r=t.length?d(t):{};r.n=t.length;if(r&&(o||e!=="current"))r.location=n.pointLocation(r);return r}function d(e){var t=0,n=e.length,r={x:e[0].x,y:e[0].y};while(++t<n)r.x+=e[t].x,r.y+=e[t].y;r.x/=n,r.y/=n,r.r=0,t=-1;while(++t<n){var i=e[t].x-r.x,s=e[t].y-r.y,u=i*i+s*s;if(u>r.r)r.r=u}r.r=Math.sqrt(r.r);if(o&&n===2){var i=e[1].x-e[0].x,s=e[1].y-e[0].y;r.angle=Math.atan2(s,i)}return r}function v(e){function o(e){l(e.changedTouches,"current");e.preventDefault()}function a(e){l(e.changedTouches,"finish");s.removeEventListener("touchmove",o,false);s.removeEventListener("touchend",a,false);s.removeEventListener("touchcancel",a,false);delete s.__polymaps_touch_listeners__}l(e.changedTouches,"start");var t={},n=-1,r=e.touches.length;while(++n<r)t[e.touches[n].identifier]=true;for(var i in u)if(!t[i])delete u[i];var s=e.target;if(s.__polymaps_touch_listeners__)return;s.addEventListener("touchmove",o,false);s.addEventListener("touchend",a,false);s.addEventListener("touchcancel",a,false);s.__polymaps_touch_listeners__=true}function m(e){var t=-1,r=e.touches.length,s=Date.now();if(r==1&&s-last<300){var o=n.zoom();n.zoomBy(1-o+Math.floor(o),n.mouse(e.touches[0]));e.preventDefault()}last=s;i=n.zoom();angle=n.angle();while(++t<r){s=e.touches[t];locations[s.identifier]=n.pointLocation(n.mouse(s))}}function g(t){switch(t.touches.length){case 1:{var r=t.touches[0];n.zoomBy(0,n.mouse(r),locations[r.identifier]);t.preventDefault();break};case 2:{var r=t.touches[0],s=t.touches[1],u=n.mouse(r),a=n.mouse(s),f={x:(u.x+a.x)/2,y:(u.y+a.y)/2},l=e.map.locationCoordinate(locations[r.identifier]),c=e.map.locationCoordinate(locations[s.identifier]),h={row:(l.row+c.row)/2,column:(l.column+c.column)/2,zoom:0},p=e.map.coordinateLocation(h);n.zoomBy(Math.log(t.scale)/Math.LN2+i-n.zoom(),f,p);if(o)n.angle(t.rotation/180*Math.PI+angle);t.preventDefault();break}}}var t={},n,r;var i,s,o,u={},a={},f=null;t.rotate=function(e){if(!arguments.length)return o;o=e;return t};t.map=function(e){if(!arguments.length)return n;if(n){r.removeEventListener("touchstart",v,false);r=null}if(n=e){r=n.container();r.addEventListener("touchstart",v,false)}return t};return t};e.interact=function(){var t={},n=e.drag(),r=e.wheel(),i=e.dblclick(),s=e.touch(),o=e.arrow();t.map=function(e){n.map(e);r.map(e);i.map(e);s.map(e);o.map(e);return t};return t};e.compass=function(){function E(e){n.setAttribute("class","compass active");if(!p)p=setInterval(S,a);if(d)y.panBy(d);o=Date.now();return M(e)}function S(){if(d&&Date.now()>o+u){y.panBy(d)}}function x(e){if(e.shiftKey){m={x0:y.mouse(e)};y.focusableParent().focus();return M(e)}}function T(e){if(!m)return;m.x1=y.mouse(e);g.setAttribute("x",Math.min(m.x0.x,m.x1.x));g.setAttribute("y",Math.min(m.x0.y,m.x1.y));g.setAttribute("width",Math.abs(m.x0.x-m.x1.x));g.setAttribute("height",Math.abs(m.x0.y-m.x1.y));g.removeAttribute("display")}function N(e){n.setAttribute("class","compass");if(m){if(m.x1){y.extent([y.pointLocation({x:Math.min(m.x0.x,m.x1.x),y:Math.max(m.x0.y,m.x1.y)}),y.pointLocation({x:Math.max(m.x0.x,m.x1.x),y:Math.min(m.x0.y,m.x1.y)})]);g.setAttribute("display","none")}m=null}if(p){clearInterval(p);p=0}}function C(e){return function(){e?this.setAttribute("class","active"):this.removeAttribute("class");d=e}}function k(e){return function(t){n.setAttribute("class","compass active");var r=y.zoom();y.zoom(e<0?Math.ceil(r)-1:Math.floor(r)+1);return M(t)}}function L(e){return function(t){y.zoom(e);return M(t)}}function A(){this.setAttribute("class","active")}function O(){this.removeAttribute("class")}function M(e){e.stopPropagation();e.preventDefault();return false}function _(t){var n=Math.SQRT1_2*i,r=i*.7,s=i*.2,o=e.svg("g"),u=o.appendChild(e.svg("path")),a=o.appendChild(e.svg("path"));u.setAttribute("class","direction");u.setAttribute("pointer-events","all");u.setAttribute("d","M0,0L"+n+","+n+"A"+i+","+i+" 0 0,1 "+ -n+","+n+"Z");a.setAttribute("class","chevron");a.setAttribute("d","M"+s+","+(r-s)+"L0,"+r+" "+ -s+","+(r-s));a.setAttribute("pointer-events","none");o.addEventListener("mousedown",E,false);o.addEventListener("mouseover",C(t),false);o.addEventListener("mouseout",C(null),false);o.addEventListener("dblclick",M,false);return o}function D(t){var n=i*.4,r=n/2,s=e.svg("g"),o=s.appendChild(e.svg("path")),u=s.appendChild(e.svg("path")),a=s.appendChild(e.svg("path")),f=s.appendChild(e.svg("path"));o.setAttribute("class","back");o.setAttribute("d","M"+ -n+",0V"+ -n+"A"+n+","+n+" 0 1,1 "+n+","+ -n+"V0Z");u.setAttribute("class","direction");u.setAttribute("d",o.getAttribute("d"));a.setAttribute("class","chevron");a.setAttribute("d","M"+ -r+","+ -n+"H"+r+(t>0?"M0,"+(-n-r)+"V"+ -r:""));f.setAttribute("class","fore");f.setAttribute("fill","none");f.setAttribute("d",o.getAttribute("d"));s.addEventListener("mousedown",k(t),false);s.addEventListener("mouseover",A,false);s.addEventListener("mouseout",O,false);s.addEventListener("dblclick",M,false);return s}function P(t){var n=i*.2,r=i*.4,s=e.svg("g"),o=s.appendChild(e.svg("rect")),u=s.appendChild(e.svg("path"));o.setAttribute("pointer-events","all");o.setAttribute("fill","none");o.setAttribute("x",-r);o.setAttribute("y",-.75*r);o.setAttribute("width",2*r);o.setAttribute("height",1.5*r);u.setAttribute("class","chevron");u.setAttribute("d","M"+ -n+",0H"+n);s.addEventListener("mousedown",L(t),false);s.addEventListener("dblclick",M,false);return s}function H(){var e=i+6,t=e,s=y.size();switch(f){case"top-left":break;case"top-right":e=s.x-e;break;case"bottom-left":t=s.y-t;break;case"bottom-right":e=s.x-e;t=s.y-t;break}n.setAttribute("transform","translate("+e+","+t+")");g.setAttribute("transform","translate("+ -e+","+ -t+")");for(var o in r){o==y.zoom()?r[o].setAttribute("class","active"):r[o].removeAttribute("class")}}function B(){while(n.lastChild)n.removeChild(n.lastChild);n.appendChild(g);if(h!="none"){v=n.appendChild(e.svg("g"));v.setAttribute("class","pan");var t=v.appendChild(e.svg("circle"));t.setAttribute("class","back");t.setAttribute("r",i);var o=v.appendChild(_({x:0,y:-s}));o.setAttribute("transform","rotate(0)");var u=v.appendChild(_({x:s,y:0}));u.setAttribute("transform","rotate(90)");var a=v.appendChild(_({x:0,y:s}));a.setAttribute("transform","rotate(180)");var p=v.appendChild(_({x:-s,y:0}));p.setAttribute("transform","rotate(270)");var d=v.appendChild(e.svg("circle"));d.setAttribute("fill","none");d.setAttribute("class","fore");d.setAttribute("r",i)}else{v=null}if(l!="none"){c=n.appendChild(e.svg("g"));c.setAttribute("class","zoom");var m=-.5;if(l=="big"){r={};for(var b=y.zoomRange()[0],m=0;b<=y.zoomRange()[1];b++,m++){(r[b]=c.appendChild(P(b))).setAttribute("transform","translate(0,"+ -(m+.75)*i*.4+")")}}var w=h=="none"?.4:2;c.setAttribute("transform","translate(0,"+i*(/^top-/.test(f)?w+(m+.5)*.4:-w)+")");c.appendChild(D(+1)).setAttribute("transform","translate(0,"+ -(m+.5)*i*.4+")");c.appendChild(D(-1)).setAttribute("transform","scale(-1)")}else{c=null}H()}var t={},n=e.svg("g"),r={},i=30,s=16,o=0,u=250,a=50,f="top-left",l="small",c,h="small",p,d,v,m,g=e.svg("rect"),y,b,w;n.setAttribute("class","compass");g.setAttribute("class","back fore");g.setAttribute("pointer-events","none");g.setAttribute("display","none");t.radius=function(e){if(!arguments.length)return i;i=e;if(y)B();return t};t.speed=function(e){if(!arguments.length)return i;s=e;return t};t.position=function(e){if(!arguments.length)return f;f=e;if(y)B();return t};t.pan=function(e){if(!arguments.length)return h;h=e;if(y)B();return t};t.zoom=function(e){if(!arguments.length)return l;l=e;if(y)B();return t};t.map=function(e){if(!arguments.length)return y;if(y){b.removeEventListener("mousedown",x,false);b.removeChild(n);b=null;w.removeEventListener("mousemove",T,false);w.removeEventListener("mouseup",N,false);w=null;y.off("move",H).off("resize",H)}if(y=e){b=y.container();b.appendChild(n);b.addEventListener("mousedown",x,false);w=b.ownerDocument.defaultView;w.addEventListener("mousemove",T,false);w.addEventListener("mouseup",N,false);y.on("move",H).on("resize",H);B()}return t};return t};e.grid=function(){function s(n){var s,o=i.firstChild,u=r.size(),a=r.pointLocation(t),f=r.pointLocation(u),l=Math.pow(2,4-Math.round(r.zoom()));a.lat=Math.floor(a.lat/l)*l;a.lon=Math.ceil(a.lon/l)*l;for(var c;(c=r.locationPoint(a).x)<=u.x;a.lon+=l){if(!o)o=i.appendChild(e.svg("line"));o.setAttribute("x1",c);o.setAttribute("x2",c);o.setAttribute("y1",0);o.setAttribute("y2",u.y);o=o.nextSibling}for(var h;(h=r.locationPoint(a).y)<=u.y;a.lat-=l){if(!o)o=i.appendChild(e.svg("line"));o.setAttribute("y1",h);o.setAttribute("y2",h);o.setAttribute("x1",0);o.setAttribute("x2",u.x);o=o.nextSibling}while(o){var p=o.nextSibling;i.removeChild(o);o=p}}var n={},r,i=e.svg("g");i.setAttribute("class","grid");n.map=function(e){if(!arguments.length)return r;if(r){i.parentNode.removeChild(i);r.off("move",s).off("resize",s)}if(r=e){r.on("move",s).on("resize",s);r.container().appendChild(i);r.dispatch({type:"move"})}return n};return n};e.stylist=function(){function s(n){var s=n.features.length,o=t.length,u=r.length,a,f,l,c,h,p,d;for(p=0;p<s;++p){if(!(l=(a=n.features[p]).element))continue;f=a.data;for(d=0;d<o;++d){h=(c=t[d]).value;if(typeof h==="function")h=h.call(null,f);h==null?c.name.local?l.removeAttributeNS(c.name.space,c.name.local):l.removeAttribute(c.name):c.name.local?l.setAttributeNS(c.name.space,c.name.local,h):l.setAttribute(c.name,h)}for(d=0;d<u;++d){h=(c=r[d]).value;if(typeof h==="function")h=h.call(null,f);h==null?l.style.removeProperty(c.name):l.style.setProperty(c.name,h,c.priority)}if(h=i){if(typeof h==="function")h=h.call(null,f);while(l.lastChild)l.removeChild(l.lastChild);if(h!=null)l.appendChild(e.svg("title")).appendChild(document.createTextNode(h))}}}var t=[],r=[],i;s.attr=function(e,r){t.push({name:n(e),value:r});return s};s.style=function(e,t,n){r.push({name:e,value:t,priority:arguments.length<3?null:n});return s};s.title=function(e){i=e;return s};return s}})(org.polymaps)